Bootstrap: docker

From: docker://nvidia/cuda:9.1-cudnn7-devel-centos7

%post
    yum install -y cuda-toolkit-9-1
    yum install -y tbb
    yum install -y bzip2
    yum install -y boost
    curl -k https://repo.anaconda.com/archive/Anaconda3-2019.03-Linux-x86_64.sh -o Anaconda3-2019.03-Linux-x86_64.sh
    bash Anaconda3-2019.03-Linux-x86_64.sh -b -u -p /opt/anaconda3
    PATH=/opt/anaconda3/bin:$PATH
    conda install -y tbb
    pip install -U cupy-cuda91
    pip install -U uproot awkward
 
%environment
    PATH=/opt/anaconda3/bin:$PATH
    #JUPYTER_RUNTIME_DIR=$HOME/jupyter-runtime
    LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH

%runscript
    /bin/bash 
